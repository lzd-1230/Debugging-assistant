## 调试助手使用帮助

> 一个串口/socket的数据助手,支持折线图波形绘制功能。

使用界面如下：

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220612200603.png)

配置窗口如下:

![](http://qny.adamli.top/lzd-1230/img-host/raw/master/image/20220612200634.png)



### 直接使用

如果不需要进行功能扩展，只需要使用`dist`目录下的内容即可。

在启动前需要对`config/config.yaml` 进行配置想要绘制的折线图数目等内容。

数据保存按钮所保存的数据在`/dist/data_save`下, 数据以`csv`的格式保存。

### 数据协议

> 个人觉得自己写上位机最大的好处就是数据协议可以定义的特别随意且简单,毕竟在上位机调试肯定比在下位机调试方便许多。

本项目的协议代码位于 `protocol.py` 模块内(目前只抽离了`uart`的部分,`socket`部分没有弄), 其中包含了帧格式以及数据解析协议的函数分别为:

+ `app_data_processor`: 数据帧格式定义
+ `app_data_handler`: 数据处理以及绘图展示功能代码

大家可以根据自己的使用需求进行修改即可完成相关绘图或者数据显示的内容,就可以完成自己想要绘制的折线图内容了。

#### 帧格式

> 目前直接使用的 `aioserial` 的 `readline` 函数完成数据的接收,因此下位机只要是遵循默认串口帧格式发送的数据都可以接收到。

+ 测试过的一个数据帧格式

```python
# 下位机使用的形式进行数据发送,以空格作为数据的分隔符
<data1> <data2> <data3> <data4>\r\n # 其中data可以是float也可以是int类型
```
#### 应用层

> 暂无应用层协议,大家需要的可以自定义

例如: 

规定发送帧 `# 0.123` 表示设定下位机中某一个参数为`0.123`

规定接收帧 `a 1.1 2.2 3.3` 表示曲线1的数据帧 `b 1.1 2.2 3.3` 表示曲线2的数据帧

个人依照具体的应用场景灵活定义与使用。

### 开发环境安装
> 如需要进行二次开发才需要安装此环境

由于代码中使用到 `asyncio` 最好使用`python3.7`及以上的python版本。

+ 安装依赖

```python
pip install -r requirements.txt
```

